[연구 일지] 2025-12-28 ~ 2025-12-29

주요 질문 및 작업 내역

프로젝트 착수 (12/28): AI 주식 파트너 '머비스' 기획 및 초기 자금(100만 원) 설정, 한국투자증권 API(모의/실전) 연동 테스트 완료.

휴장일 처리 로직: weekday() 함수를 활용하여 주말 및 휴장일에는 자동으로 '직전 장 데이터'를 로드하거나 '학습 모드'로 전환하도록 구현.

하이브리드 시스템 구축: 모의투자 서버의 데이터 부족(ETF 등) 한계를 극복하기 위해 '데이터 조회(실전)'와 '주문(모의)'을 분리하여 운용하는 이원화 시스템 구축.

비용 및 속도 최적화: 무료 API의 호출 제한(429 Error) 해결을 위해 Gemini API 유료 플랜(Pay-as-you-go) 도입, 대기 시간 제거로 분석 속도 극대화.

안정성 강화: 프로그램 강제 종료 방지 및 서버 점검 시간(새벽)에 대응하는 예외 처리 로직 추가.

시행착오 및 오류 분석

KeyError 'vol': API 거래량 필드명이 엔드포인트마다 달라(vol vs acml_vol) 발생. 전처리 함수에서 필드명을 vol로 통일하여 해결.

429 RESOURCE_EXHAUSTED: 무료 API 사용량 초과로 인한 차단. 유료 전환 및 코드 내 불필요한 sleep 로직 제거로 해결.

UnboundLocalError: 프로그램 중단(Ctrl+C) 시 변수 선언 시점 차이로 인한 참조 오류. 변수 초기화 위치를 최상단으로 이동하여 해결.

JSONDecodeError: 주말/새벽 서버 점검으로 API가 JSON이 아닌 HTML을 반환하여 발생. 예외 처리 구문 추가 및 점검 시간 전용 '비상 학습 리스트' 로드 기능으로 해결.

내일의 목표

자율 학습 시스템 구현: mervis_brain.py에 JSON DB를 연동하여 과거 분석 이력을 저장하고, 이를 기반으로 스스로 전략을 수정하는 '기억 및 자가 학습' 기능 탑재.

실전 검증: 실제 미국장 개장 시 스캐너가 실시간 트렌드 종목을 정상적으로 발굴하는지 테스트.